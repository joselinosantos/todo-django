{% extends 'base.html' %}
{% block title %}Lista de tarefas {% endblock %}

{% block content %}
<div class="container">
  <h2>Lista de tarefas</h2>
  <div class="row">
    <div class="col s12">
      <div class="row">
        <div class="input-field col s6">
          <a class="btn blue" href="/newtask">Nova</a>
        </div>
      </div>

      <div class="row">
        <div class="input-field col s6">
          <form id="search-form">
            <input placeholder="Buscar tarefa" name="search" value="{{ request.GET.search }}" id="buscar" type="text"><i class="material-icons" id="search-btn">search</i>
          </form>
        </div>
      </div>
    </div>
  </div>

  {% if messages %}
  <ul class="messages" flashes>
    {% for message in messages %}
    <script>M.toast({ html: '{{ message }}' })</script>
    <li {% if message.tags %} class="" {{message.tags}}"{% endif %}">{{message}}</li>
    {% endfor %}
  </ul>
  {% endif %}

  <div class="row">
    {% for task in tasks %}
    <div class="col s12 m6">
      <div class="card hoverable">
        <div class="card-content">
          <span class="card-title">{{ task.title }}</span>
          <p>{{ task.description }}</p>
        </div>
        <div class="card-action">
          <a class="btn green" href="/task/{{task.id}}">Ver task</a>
          <a class="btn orange" href="/edit/{{task.id}}">Editar</a>
          <a class="btn red delete-btn" href="/delete/{{task.id}}">Deletar</a>
        </div>
      </div>
    </div>
    {% endfor %}
  </div>

  <div class="center">
    <ul class="pagination">
      {% if tasks.has_previous %}
      <li class="disabled"><a href="?page={{ tasks.previous_page_number }}"><i
            class="material-icons">chevron_left</i></a></li>
      {% endif %}

      {% if tasks.paginator.num_pages %}
      <li class="active"><a class="waves-effect" href="#!">{{ tasks.number }}</a>de <a
          href="">{{tasks.paginator.num_pages }}</a></li>
      {% endif %}
      {% if tasks.has_next %}
      <li class="waves-effect"><a href="?page={{ tasks.next_page_number }}"><i
            class="material-icons">chevron_right</i></a></li>
      {% endif %}
    </ul>
  </div>
</div>
{% endblock %}